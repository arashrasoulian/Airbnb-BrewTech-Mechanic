
  <div class="user-greeting mt-5">
    <% if user_signed_in? %>
      <p  >Welcome, <b> <%= current_user.first_name %> </b></p>
    <% end %>
                          <%# searchbar in all text  %>
    <div class="search-form" >
      <%= form_with url: root_path, method: :get, class: "d-flex" do %>
        <%= text_field_tag :query,
                           params[:query],
                           class: "form-control",
                           placeholder: "Type a keyword" %>
        <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
      <% end %>
      <%# <%= debug params[:query] %> <!-- This will display the search query on your web page --> %>
    </div>
                             <%# filter on city and price %>
      <%= form_with(url: root_path, method: "get") do |form| %>
        <%= form.label :city, "City:" %>
        <%= form.select :city, options_for_select(@cities), { include_blank: true }, class: "form-control" %>

        <%= form.label :min_price, "Minimum Price:" %>
        <%= form.number_field :min_price, class: "form-control" %>

        <%= form.label :max_price, "Maximum Price:" %>
        <%= form.number_field :max_price, class: "form-control" %>

        <%= form.submit "Search", class: "btn btn-primary" %>
      <% end %>
  </div>


  <h1 class="my-4">AirbnbBrewTechMechanicClassName</h1>
  <div class="row">
    <div class=" col-8 row ">

      <% @flats.each do |flat| %>
        <div class="flat col-3 m-3">
          <div class="flat-image">
            <% if flat.photo.attached? %>
              <%= cl_image_tag flat.photo.key, crop: :fill, style: "width: 100px; height: 150px;" %>
            <% else %>
              <%= image_tag "no_image.jpeg", style: "width: 100px; height: 150px;" %>
            <% end %>
          </div>
          <div class="flat-info">
            <h3><%= flat.name %></h3>
            <%= flat.address %>
            <br/>
            <%= flat.city %>
            <br/>
            <%= link_to "Show", flat_path(flat), class: "flat-link" %>
          </div>

        </div>
      <% end %>
    </div>
    <div class=" col-4">
      <h2>Map</h2>
      <div style="width: 100%; height: 300px;"
        data-controller="map"
        data-map-markers-value="<%= @markers.to_json %>"
        data-map-api-key-value="<%= ENV["MAPBOX_API_KEY"] %>">
      </div>
    </div>
  </div>
